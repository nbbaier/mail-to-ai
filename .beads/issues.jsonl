{"id":"mail-to-ai-0zk","title":"Dashboard","description":"Admin dashboard showing live activity, agent usage stats, and system health.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-18T13:15:44.02684-06:00","updated_at":"2025-12-18T17:14:46.347153-06:00","closed_at":"2025-12-18T17:14:46.347153-06:00","close_reason":"Cut from MVP scope - dashboard not needed for hackathon demo"}
{"id":"mail-to-ai-0zk.1","title":"Create dashboard API endpoints for metrics","description":"Add API routes to expose metrics stored in KV.\n\nFiles: src/routes/dashboard.ts (new), src/index.ts (mount routes)\n\nEndpoints:\n- GET /api/stats - total emails, emails today, unique senders\n- GET /api/agents - usage by agent, top meta-agents\n- GET /api/health - detailed health checks (KV, Claude API)\n\nData comes from KV keys tracked by rate-limiter and metrics utils.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:17:08.167931-06:00","updated_at":"2025-12-18T17:14:46.437434-06:00","closed_at":"2025-12-18T17:14:46.437434-06:00","close_reason":"Cut from MVP scope - dashboard not needed","dependencies":[{"issue_id":"mail-to-ai-0zk.1","depends_on_id":"mail-to-ai-0zk","type":"parent-child","created_at":"2025-12-18T13:17:08.169714-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-0zk.1","depends_on_id":"mail-to-ai-9rg.1","type":"blocks","created_at":"2025-12-18T13:17:42.756768-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-0zk.2","title":"Build dashboard frontend UI","description":"Create a simple dashboard UI served by the worker.\n\nOptions:\n1. Static HTML/JS served from worker (simple)\n2. Cloudflare Pages with React (more complex)\n\nMVP features:\n- Live stats display (total emails, today's count)\n- Agent usage breakdown chart\n- Recent activity log\n- System health indicators\n\nFiles: src/routes/dashboard.ts (serve static), public/ or inline HTML","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:17:14.38503-06:00","updated_at":"2025-12-18T17:14:46.702609-06:00","closed_at":"2025-12-18T17:14:46.702609-06:00","close_reason":"Cut from MVP scope - dashboard not needed","dependencies":[{"issue_id":"mail-to-ai-0zk.2","depends_on_id":"mail-to-ai-0zk","type":"parent-child","created_at":"2025-12-18T13:17:14.388531-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-0zk.2","depends_on_id":"mail-to-ai-0zk.1","type":"blocks","created_at":"2025-12-18T13:17:42.831506-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-2gr","title":"Documentation","description":"User guide, README, and examples for using the email agent service.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T13:15:49.357392-06:00","updated_at":"2025-12-18T13:15:49.357392-06:00"}
{"id":"mail-to-ai-2gr.1","title":"Write comprehensive README with setup instructions","description":"Update README.md with full project documentation.\n\nSections:\n- Project overview and architecture diagram\n- Prerequisites (Cloudflare account, inbound.new, Anthropic API)\n- Local development setup\n- Deployment instructions\n- Environment variables reference\n- Built-in agents list\n\nFile: README.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:17:20.073956-06:00","updated_at":"2025-12-18T23:08:03.328877-06:00","closed_at":"2025-12-18T23:08:03.328877-06:00","close_reason":"Wrote comprehensive README with setup instructions, agent docs, architecture, and dev guide","dependencies":[{"issue_id":"mail-to-ai-2gr.1","depends_on_id":"mail-to-ai-2gr","type":"parent-child","created_at":"2025-12-18T13:17:20.075727-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-2gr.2","title":"Create user guide with examples","description":"Write end-user documentation for people using the email agents.\n\nFile: docs/USER_GUIDE.md or hosted page\n\nSections:\n- Quick start (send your first email)\n- Built-in agents with examples\n- Creating custom agents (meta-agent)\n- Multi-turn conversations (reply threading)\n- Rate limits and guidelines\n- Troubleshooting FAQ\n\nInclude realistic email examples for each agent type.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T13:17:25.584929-06:00","updated_at":"2025-12-18T13:17:25.584929-06:00","dependencies":[{"issue_id":"mail-to-ai-2gr.2","depends_on_id":"mail-to-ai-2gr","type":"parent-child","created_at":"2025-12-18T13:17:25.586673-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-2gr.3","title":"Build landing page frontend","description":"Create a simple landing page served by the worker explaining the service.\n\nFiles: src/routes/landing.ts (new), src/index.ts (mount route)\n\nContent sections:\n1. Hero: 'AI Agents You Can Email' - No apps, no APIs, just email\n2. Built-in agents: Show summarize, research, info with their prompts\n3. Meta-agent: Explain the concept with examples (write-haiku-about-cats@, etc.)\n4. Try it section: Email addresses to test\n\nDesign:\n- Clean, minimal Tailwind CSS\n- Mobile responsive\n- Fast loading (inline styles)\n\nRoute: GET / returns the landing page HTML","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:14:56.008822-06:00","updated_at":"2025-12-18T21:59:30.393778-06:00","closed_at":"2025-12-18T21:59:30.393778-06:00","close_reason":"Implemented landing page with hero, built-in agents, meta-agent examples, try it section, and how it works","dependencies":[{"issue_id":"mail-to-ai-2gr.3","depends_on_id":"mail-to-ai-2gr","type":"parent-child","created_at":"2025-12-18T17:14:56.016439-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-2gr.4","title":"Document email address parsing limitations for MetaAgent","description":"Document the limitations of MetaAgent's email address parsing for users.\n\nThe parseAddressToInstruction method in src/agents/meta-agent.ts handles:\n- camelCase: writeHaikuAboutCats\n- snake_case: write_haiku_about_cats  \n- kebab-case: write-haiku-about-cats\n\nBut cannot handle unseparated text like 'writehaikuaboutcats' because there are no word boundaries to detect where words split without NLP/dictionary lookup.\n\nAdd documentation to:\n1. README.md or docs explaining this limitation\n2. Code comments clarifying supported formats\n3. Example valid email addresses users should use","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T21:43:27.013475-06:00","updated_at":"2025-12-18T21:43:29.930459-06:00","dependencies":[{"issue_id":"mail-to-ai-2gr.4","depends_on_id":"mail-to-ai-2gr","type":"parent-child","created_at":"2025-12-18T21:43:27.014619-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-9rg","title":"Infrastructure \u0026 Deployment","description":"","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-18T13:15:24.527071-06:00","updated_at":"2025-12-18T21:34:06.605571-06:00","closed_at":"2025-12-18T21:34:06.605571-06:00","close_reason":"All children completed"}
{"id":"mail-to-ai-9rg.1","title":"Deploy to Cloudflare Workers and verify webhook receives emails","description":"Deploy the current codebase to CF Workers. Configure wrangler.toml with production settings. Test that inbound.new webhook successfully delivers emails to the endpoint.\n\nFiles: wrangler.toml, src/index.ts\nSteps:\n1. Run wrangler deploy\n2. Configure inbound.new webhook URL to point to deployed worker\n3. Send test email and verify it appears in logs\n4. Verify queue processing works end-to-end","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T13:15:57.175534-06:00","updated_at":"2025-12-18T15:31:07.353805-06:00","closed_at":"2025-12-18T15:31:07.353805-06:00","close_reason":"Deployed to https://mail-to-ai.nico-baier.workers.dev, webhook verified working with inbound.new test payload","dependencies":[{"issue_id":"mail-to-ai-9rg.1","depends_on_id":"mail-to-ai-9rg","type":"parent-child","created_at":"2025-12-18T13:15:57.177224-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-9rg.2","title":"Configure DNS records (MX, SPF, DKIM) for email domain","description":"Set up DNS records so emails to @yourdomain.com are received by inbound.new and replies have proper deliverability.\n\nSteps:\n1. Add MX record pointing to inbound.new\n2. Add SPF record including inbound.new\n3. Configure DKIM for outbound emails\n4. Test email deliverability to Gmail/Outlook (check spam folder)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T13:16:04.965602-06:00","updated_at":"2025-12-18T17:16:24.859078-06:00","closed_at":"2025-12-18T17:16:24.859078-06:00","close_reason":"DNS configured by user - MX, SPF, DKIM set up","dependencies":[{"issue_id":"mail-to-ai-9rg.2","depends_on_id":"mail-to-ai-9rg","type":"parent-child","created_at":"2025-12-18T13:16:04.967296-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-9rg.3","title":"Set up production secrets and KV namespace in Cloudflare","description":"Configure all required secrets and KV namespace for production deployment.\n\nSecrets needed:\n- ANTHROPIC_API_KEY\n- INBOUND_API_KEY  \n- INBOUND_WEBHOOK_SECRET\n- ALLOWED_DOMAIN\n\nKV Namespace:\n- Create KV namespace for rate limiting, caching, metrics\n- Bind as CACHE_KV in wrangler.toml\n\nSteps:\n1. Run: wrangler kv:namespace create CACHE\n2. Add binding to wrangler.toml\n3. Run: wrangler secret put \u003cSECRET_NAME\u003e for each secret\n4. Verify secrets and KV are accessible in worker","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T13:16:12.188537-06:00","updated_at":"2025-12-18T21:31:52.46477-06:00","closed_at":"2025-12-18T21:31:52.46477-06:00","close_reason":"KV namespace configured in Alchemy as CACHE_KV. Secrets configured: ANTHROPIC_API_KEY, INBOUND_API_KEY, INBOUND_WEBHOOK_SECRET. ALLOWED_DOMAIN set as env var.","dependencies":[{"issue_id":"mail-to-ai-9rg.3","depends_on_id":"mail-to-ai-9rg","type":"parent-child","created_at":"2025-12-18T13:16:12.190327-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-9rg.4","title":"Update plan.md to reflect Cloudflare Workers architecture","description":"The plan.md currently references Railway/Fly.io, BullMQ, ioredis, and Upstash. Update to reflect actual implementation:\n\nChanges needed:\n- Tech stack: Cloudflare Workers, Queues, Durable Objects, KV\n- Cache/Rate limiting: Cloudflare KV (not Redis/Upstash)\n- Queue: CF Queues (not BullMQ)\n- Hosting: Cloudflare (not Railway/Fly.io)\n- Remove Bun-specific references (CF Workers uses V8)\n\nFile: plan.md","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-18T13:17:32.39594-06:00","updated_at":"2025-12-18T17:14:47.096156-06:00","closed_at":"2025-12-18T17:14:47.096156-06:00","close_reason":"Completed - plan.md updated with simplified MVP scope","dependencies":[{"issue_id":"mail-to-ai-9rg.4","depends_on_id":"mail-to-ai-9rg","type":"parent-child","created_at":"2025-12-18T13:17:32.397877-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-9rg.5","title":"Migrate from Upstash Redis to Cloudflare KV","description":"Replace Upstash Redis with Cloudflare KV for rate limiting and metrics.\n\nFiles to modify:\n- src/utils/rate-limiter.ts - rewrite to use KV instead of Redis\n- src/services/email-processor.ts - update imports/calls\n- src/index.ts - remove Redis initialization, use KV binding\n- src/types/index.ts - update Env type (remove UPSTASH_*, add CACHE_KV)\n- wrangler.toml - add KV namespace binding\n- package.json - remove @upstash/redis dependency\n\nKV API differences:\n- get/put instead of get/set\n- Use expirationTtl for TTL\n- No atomic increment - use get+put (or Durable Objects for true atomics)\n\nNote: KV is eventually consistent, acceptable for rate limiting.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T13:25:49.966117-06:00","updated_at":"2025-12-18T15:36:57.162413-06:00","closed_at":"2025-12-18T15:36:57.162413-06:00","close_reason":"Migrated from Upstash Redis to Cloudflare KV. Created CACHE_KV namespace, rewrote rate-limiter.ts, updated types and email-processor, removed @upstash/redis dependency.","dependencies":[{"issue_id":"mail-to-ai-9rg.5","depends_on_id":"mail-to-ai-9rg","type":"parent-child","created_at":"2025-12-18T13:25:49.967749-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-akr","title":"Meta-Agent System","description":"Core innovation: Dynamic agent creation from arbitrary email addresses (e.g., write-haiku-about-cats@domain.com). The address becomes the instruction.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-18T13:15:31.293999-06:00","updated_at":"2025-12-18T21:36:11.800976-06:00","closed_at":"2025-12-18T21:36:11.800976-06:00","close_reason":"All children completed"}
{"id":"mail-to-ai-akr.1","title":"Implement MetaAgent class that derives behavior from email address","description":"Create the meta-agent that interprets arbitrary email addresses as task instructions.\n\nFiles to create/modify:\n- src/agents/meta-agent.ts (new)\n- src/agents/index.ts (export)\n- src/services/agent-router.ts (fallback to MetaAgent)\n\nImplementation:\n1. Parse address to instruction: write-haiku-about-cats → 'write haiku about cats'\n2. Use Claude to generate a system prompt from the instruction\n3. Process email with the generated prompt\n4. Return response\n\nExample: email to 'explain-quantum-physics@domain.com' creates an agent that explains quantum physics.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-18T13:16:21.096739-06:00","updated_at":"2025-12-18T19:56:43.495455-06:00","closed_at":"2025-12-18T19:56:43.495455-06:00","close_reason":"Implemented MetaAgent class that parses email addresses to instructions and generates dynamic system prompts","dependencies":[{"issue_id":"mail-to-ai-akr.1","depends_on_id":"mail-to-ai-akr","type":"parent-child","created_at":"2025-12-18T13:16:21.09857-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-akr.1","depends_on_id":"mail-to-ai-9rg.1","type":"blocks","created_at":"2025-12-18T13:17:36.491392-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-akr.2","title":"Add prompt caching for meta-agent generated prompts","description":"Cache generated system prompts in KV so repeat emails to the same address don't regenerate.\n\nFiles: src/agents/meta-agent.ts, src/utils/cache.ts (new)\n\nImplementation:\n1. Before generating prompt, check KV: agent-prompt:{address}\n2. If cached, use it directly\n3. If not, generate and cache with 7-day TTL (expirationTtl)\n4. Log cache hits/misses for metrics\n\nThis saves ~50% of Claude API calls for popular addresses.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T13:16:29.083799-06:00","updated_at":"2025-12-18T21:35:27.359216-06:00","closed_at":"2025-12-18T21:35:27.359216-06:00","close_reason":"Integrated KV caching for meta-agent prompts. Checks memory cache first, then KV, then generates. Caches with 7-day TTL. Logs cache source (memory/kv/generated).","dependencies":[{"issue_id":"mail-to-ai-akr.2","depends_on_id":"mail-to-ai-akr","type":"parent-child","created_at":"2025-12-18T13:16:29.085413-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-akr.2","depends_on_id":"mail-to-ai-akr.1","type":"blocks","created_at":"2025-12-18T13:17:42.258532-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-akr.3","title":"Add safety validation for meta-agent addresses","description":"Reject unsafe or inappropriate agent addresses before processing.\n\nFiles: src/utils/safety-validator.ts (new), src/agents/meta-agent.ts\n\nImplementation:\n1. Create blocklist of unsafe patterns: /password/i, /hack/i, /exploit/i, /malware/i, /phishing/i, /spam/i, /illegal/i, /weapon/i, /drug/i\n2. Check address against patterns before creating agent\n3. Check email body for prompt injection attempts ('ignore previous instructions')\n4. Return friendly error email for blocked requests\n\nExample blocked: hack-into-bank@domain.com → rejected","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T13:16:38.771521-06:00","updated_at":"2025-12-18T21:33:05.068137-06:00","closed_at":"2025-12-18T21:33:05.068137-06:00","close_reason":"Created safety-validator.ts with blocklist patterns for unsafe addresses and prompt injection detection. Integrated into MetaAgent.process()","dependencies":[{"issue_id":"mail-to-ai-akr.3","depends_on_id":"mail-to-ai-akr","type":"parent-child","created_at":"2025-12-18T13:16:38.773365-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-akr.3","depends_on_id":"mail-to-ai-akr.1","type":"blocks","created_at":"2025-12-18T13:17:42.34914-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-akr.4","title":"Add tool selection based on meta-agent address keywords","description":"Automatically enable tools (web search) based on address intent.\n\nFiles: src/agents/meta-agent.ts\n\nImplementation:\n1. Analyze instruction for capability keywords:\n   - needsWebSearch: /research|find|search|latest|current|news/i\n   - isCreative: /write|create|compose|generate|draft/i\n2. Enable web_search tool if needsWebSearch is true\n3. Adjust model parameters for creative vs factual tasks\n\nExample: 'research-ai-trends@domain.com' gets web search enabled","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:16:44.962075-06:00","updated_at":"2025-12-18T17:14:46.944931-06:00","closed_at":"2025-12-18T17:14:46.944931-06:00","close_reason":"Cut from MVP scope - just enable web search on research agent","dependencies":[{"issue_id":"mail-to-ai-akr.4","depends_on_id":"mail-to-ai-akr","type":"parent-child","created_at":"2025-12-18T13:16:44.964084-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-akr.4","depends_on_id":"mail-to-ai-akr.1","type":"blocks","created_at":"2025-12-18T13:17:42.441248-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-bb1","title":"My first issue","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:05:43.102608-06:00","updated_at":"2025-12-18T13:15:18.007367-06:00","closed_at":"2025-12-18T13:15:18.007367-06:00","close_reason":"Replaced with structured project plan"}
{"id":"mail-to-ai-luo","title":"Built-in Agents","description":"Pre-built specialized agents: Research (web search), Summarize, and Write agents.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-18T13:15:37.217394-06:00","updated_at":"2025-12-18T13:15:37.217394-06:00"}
{"id":"mail-to-ai-luo.1","title":"Implement ResearchAgent with web search capability","description":"Create ResearchAgent with web search capability using Anthropic's native webSearch tool.\n\n**Implementation:**\n\n1. Create src/agents/research-agent.ts:\n   - Extend BaseAgent\n   - Override getTools() to add anthropic.tools.webSearch_20250305({ maxUses: 5 })\n   - Override process() method to use Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)\n   - System prompt emphasizing research, source citation, and synthesis\n   - Add structured logging: agent name, emailId, searchCount, responseTime\n\n2. System Prompt Guidelines:\n   - Emphasize proactive web search for current information\n   - Require source citations with markdown URLs\n   - Focus on synthesis, not just listing results\n   - Include today's date for temporal context\n   - Sign off as 'Research Agent'\n\n3. Web Search Configuration:\n   import { anthropic } from '@ai-sdk/anthropic';\n   const webSearchTool = anthropic.tools.webSearch_20250305({ maxUses: 5 });\n   return { web_search: webSearchTool };\n\n4. Logging:\n   console.log(JSON.stringify({ agent, emailId, from, responseTime, searchCount, timestamp }));\n\n**Address:** research@mail-to-ai.com\n\n**Key Decisions:**\n- Model: Sonnet 4.5 (better than Sonnet 4, cheaper than Opus 4)\n- Max searches: 5 per request\n- No domain restrictions initially\n\n**Expected Behavior:**\n- Responds to research questions with cited sources\n- Uses web search for current events and factual queries\n- Maintains conversation history via Durable Objects","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T13:16:50.843292-06:00","updated_at":"2025-12-18T17:54:11.659274-06:00","closed_at":"2025-12-18T17:54:11.659274-06:00","close_reason":"Implemented ResearchAgent with web search capability using Anthropic webSearch tool","dependencies":[{"issue_id":"mail-to-ai-luo.1","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T13:16:50.845246-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.1","depends_on_id":"mail-to-ai-9rg.1","type":"blocks","created_at":"2025-12-18T13:17:42.533315-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-luo.2","title":"Implement SummarizeAgent for email/document summarization","description":"Create SummarizeAgent for condensing long emails and documents into key points.\n\n**Implementation:**\n\n1. Create src/agents/summarize-agent.ts:\n   - Extend BaseAgent\n   - No special tools needed (pure text processing)\n   - Use default model from BaseAgent\n   - System prompt emphasizing extraction and clarity\n   - Add structured logging: agent name, emailId, responseTime\n\n2. System Prompt Guidelines:\n   - Identify core message and main points\n   - Extract action items and important details\n   - Use structured format: Summary, Key Points, Action Items\n   - Maintain accuracy while being concise\n   - Handle different content types (emails, threads, articles)\n   - Sign off as 'Summarize Agent'\n\n3. Response Format:\n   **Summary:** [1-3 sentence overview]\n   **Key Points:**\n   - [Point 1]\n   - [Point 2]\n   **Action Items:** (if applicable)\n   - [Task 1]\n   **Additional Details:** (if relevant)\n\n4. Logging:\n   console.log(JSON.stringify({ agent, emailId, from, responseTime, timestamp }));\n\n**Address:** summarize@mail-to-ai.com\n\n**Expected Behavior:**\n- Extracts key information from long content\n- Provides structured summaries with bullet points\n- Identifies action items explicitly\n- Maintains conversation history via Durable Objects","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T13:16:56.425827-06:00","updated_at":"2025-12-18T17:54:15.592271-06:00","closed_at":"2025-12-18T17:54:15.592271-06:00","close_reason":"Implemented all agents and updated configuration","dependencies":[{"issue_id":"mail-to-ai-luo.2","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T13:16:56.427701-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.2","depends_on_id":"mail-to-ai-9rg.1","type":"blocks","created_at":"2025-12-18T13:17:42.605538-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-luo.3","title":"Implement WriteAgent for content drafting","description":"Create write agent for drafting emails, blog posts, and other content.\n\nFiles to create/modify:\n- src/agents/write-agent.ts (new)\n- src/agents/index.ts (export)\n- src/services/agent-router.ts (add to registry)\n- wrangler.toml (add Durable Object binding)\n\nSystem prompt: 'You are a professional writer. Help draft emails, blog posts, and other content. Match the requested tone and style. Be clear and engaging.'\n\nAddress: write@domain.com\nUse cases: 'Draft a follow-up email after job interview', 'Write a blog post intro about productivity'","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T13:17:01.60104-06:00","updated_at":"2025-12-18T17:14:46.225692-06:00","closed_at":"2025-12-18T17:14:46.225692-06:00","close_reason":"Cut from MVP scope - meta-agent handles writing tasks","dependencies":[{"issue_id":"mail-to-ai-luo.3","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T13:17:01.606208-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.3","depends_on_id":"mail-to-ai-9rg.1","type":"blocks","created_at":"2025-12-18T13:17:42.673935-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-luo.4","title":"Update Alchemy configuration for new agents","description":"Add ResearchAgent and SummarizeAgent to Alchemy infrastructure configuration.\n\n**File:** alchemy.run.ts\n\n**Changes:**\n\n1. Add imports at top (after InfoAgent import):\n   import { ResearchAgent } from './src/agents/research-agent';\n   import { SummarizeAgent } from './src/agents/summarize-agent';\n\n2. Add Durable Object namespaces (after info_agent, around line 51):\n   export const research_agent = DurableObjectNamespace('mta-research_agent', {\n     className: 'ResearchAgent',\n   });\n\n   export const summarize_agent = DurableObjectNamespace('mta-summarize_agent', {\n     className: 'SummarizeAgent',\n   });\n\n3. Add to worker bindings (around line 64-65):\n   bindings: {\n     // ... existing\n     INFO_AGENT: info_agent,\n     RESEARCH_AGENT: research_agent,\n     SUMMARIZE_AGENT: summarize_agent,\n     // ... rest\n   }\n\n**Important:** Use Alchemy for all infrastructure. Do NOT edit wrangler.toml manually.\n\n**Deployment:** Run `npm run deploy` to apply changes (runs alchemy deploy --adopt)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:45:24.586758-06:00","updated_at":"2025-12-18T17:54:15.593135-06:00","closed_at":"2025-12-18T17:54:15.593135-06:00","close_reason":"Implemented all agents and updated configuration","dependencies":[{"issue_id":"mail-to-ai-luo.4","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T17:45:24.588877-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.4","depends_on_id":"mail-to-ai-luo.1","type":"blocks","created_at":"2025-12-18T17:46:17.212-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.4","depends_on_id":"mail-to-ai-luo.2","type":"blocks","created_at":"2025-12-18T17:46:17.273842-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-luo.5","title":"Update agent exports and registration","description":"Register ResearchAgent and SummarizeAgent in the routing system and export them properly.\n\n**Files to modify:**\n\n1. **src/agents/index.ts** - Export the new agents:\n   export { ResearchAgent } from './research-agent';\n   export { SummarizeAgent } from './summarize-agent';\n\n2. **src/index.ts** - Export Durable Object classes (around line 15-17):\n   export { ResearchAgent } from './agents/research-agent';\n   export { SummarizeAgent } from './agents/summarize-agent';\n\n3. **src/services/agent-router.ts** - Update AGENT_REGISTRY (lines 11-17):\n   const AGENT_REGISTRY: Map\u003c\n     string,\n     keyof Pick\u003cEnv, 'ECHO_AGENT' | 'INFO_AGENT' | 'RESEARCH_AGENT' | 'SUMMARIZE_AGENT'\u003e\n   \u003e = new Map([\n     ['echo', 'ECHO_AGENT'],\n     ['info', 'INFO_AGENT'],\n     ['research', 'RESEARCH_AGENT'],\n     ['summarize', 'SUMMARIZE_AGENT'],\n   ]);\n\n4. **src/types/env.ts** - Add environment bindings (around line 10-12):\n   RESEARCH_AGENT: DurableObjectNamespace;\n   SUMMARIZE_AGENT: DurableObjectNamespace;\n\n**Verification:** Run `npm run typecheck` to ensure no TypeScript errors","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T17:45:56.379474-06:00","updated_at":"2025-12-18T17:54:15.593644-06:00","closed_at":"2025-12-18T17:54:15.593644-06:00","close_reason":"Implemented all agents and updated configuration","dependencies":[{"issue_id":"mail-to-ai-luo.5","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T17:45:56.381971-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.5","depends_on_id":"mail-to-ai-luo.1","type":"blocks","created_at":"2025-12-18T17:46:17.334017-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.5","depends_on_id":"mail-to-ai-luo.2","type":"blocks","created_at":"2025-12-18T17:46:17.395197-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-luo.6","title":"Update InfoAgent documentation","description":"Update InfoAgent system prompt to reflect actual availability of research and summarize agents.\n\n**File:** src/agents/info-agent.ts (around lines 16-20)\n\n**Change from:**\n- **research@${this.env.ALLOWED_DOMAIN}** - Web research on any topic (coming soon)\n- **summarize@${this.env.ALLOWED_DOMAIN}** - Summarize long emails or threads (coming soon)\n- **write@${this.env.ALLOWED_DOMAIN}** - Draft emails, posts, articles (coming soon)\n\n**To:**\n- **research@${this.env.ALLOWED_DOMAIN}** - Web research on any topic with cited sources\n- **summarize@${this.env.ALLOWED_DOMAIN}** - Summarize long emails or threads into key points\n- **write@${this.env.ALLOWED_DOMAIN}** - Draft emails, posts, articles (coming soon)\n\n**Purpose:** Keep InfoAgent's documentation accurate so users know which agents are available.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T17:45:58.589289-06:00","updated_at":"2025-12-18T17:54:15.594041-06:00","closed_at":"2025-12-18T17:54:15.594041-06:00","close_reason":"Implemented all agents and updated configuration","dependencies":[{"issue_id":"mail-to-ai-luo.6","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T17:45:58.59098-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-luo.7","title":"Test ResearchAgent and SummarizeAgent","description":"Manual testing of both agents after deployment to verify functionality.\n\n**ResearchAgent Test Cases:**\n\n1. **Current events:** Send to research@mail-to-ai.com\n   Subject: 'Test: Current Events'\n   Body: 'What are the latest developments in quantum computing?'\n   Expected: Recent news with cited URLs\n\n2. **Factual research:**\n   Body: 'What is the population of Tokyo?'\n   Expected: Accurate data with sources\n\n3. **Complex research:**\n   Body: 'Compare AI regulation in EU, US, and China'\n   Expected: Synthesized answer with multiple sources\n\n4. **Conversation continuity:**\n   First: 'What is quantum entanglement?'\n   Reply: 'How is this used in quantum computing?'\n   Expected: Thread maintained, new searches if needed\n\n**SummarizeAgent Test Cases:**\n\n1. **Simple email:** Send to summarize@mail-to-ai.com\n   Body: [300-word project update]\n   Expected: Structured summary with key points\n\n2. **Long content:**\n   Body: [2000+ word article]\n   Expected: Concise summary maintaining essentials\n\n3. **Action items:**\n   Body: Email with tasks and deadlines\n   Expected: Clear 'Action Items' section\n\n4. **Thread summary:**\n   Multiple back-and-forth emails, then ask for summary\n   Expected: Overview of conversation progression\n\n**Verification:**\n- Check logs: `wrangler tail`\n- Verify correct agent routing\n- Confirm web search tool usage (ResearchAgent)\n- Monitor response times and quality\n- Check for errors in Cloudflare dashboard","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T17:46:02.251601-06:00","updated_at":"2025-12-18T17:46:02.251601-06:00","dependencies":[{"issue_id":"mail-to-ai-luo.7","depends_on_id":"mail-to-ai-luo","type":"parent-child","created_at":"2025-12-18T17:46:02.253346-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.7","depends_on_id":"mail-to-ai-luo.4","type":"blocks","created_at":"2025-12-18T17:46:17.457514-06:00","created_by":"daemon"},{"issue_id":"mail-to-ai-luo.7","depends_on_id":"mail-to-ai-luo.5","type":"blocks","created_at":"2025-12-18T17:46:17.516296-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-q91","title":"Migrate from @anthropic-ai/sdk to Vercel AI SDK with Anthropic provider","description":"","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-18T16:50:02.181759-06:00","updated_at":"2025-12-18T17:08:19.575729-06:00","closed_at":"2025-12-18T17:08:19.575729-06:00","close_reason":"Successfully migrated from @anthropic-ai/sdk to Vercel AI SDK with @ai-sdk/anthropic provider"}
{"id":"mail-to-ai-q91.1","title":"Install @ai-sdk/anthropic and ai packages","description":"Add Vercel AI SDK dependencies: ai and @ai-sdk/anthropic. Remove @anthropic-ai/sdk.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T16:50:12.334631-06:00","updated_at":"2025-12-18T16:55:28.359393-06:00","closed_at":"2025-12-18T16:55:28.359393-06:00","close_reason":"Done","dependencies":[{"issue_id":"mail-to-ai-q91.1","depends_on_id":"mail-to-ai-q91","type":"parent-child","created_at":"2025-12-18T16:50:12.342312-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-q91.2","title":"Update BaseAgent to use AI SDK generateText","description":"Refactor src/agents/base-agent.ts to use generateText from ai package with @ai-sdk/anthropic provider instead of direct Anthropic SDK. Update imports, client initialization, and response handling.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T16:50:12.43201-06:00","updated_at":"2025-12-18T17:08:14.603992-06:00","closed_at":"2025-12-18T17:08:14.603992-06:00","close_reason":"Refactored process() to use generateText from ai package with @ai-sdk/anthropic provider","dependencies":[{"issue_id":"mail-to-ai-q91.2","depends_on_id":"mail-to-ai-q91","type":"parent-child","created_at":"2025-12-18T16:50:12.433989-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-q91.3","title":"Update getTools() return type for AI SDK","description":"Change getTools() in base-agent.ts from Anthropic.Tool[] to AI SDK tool format. Currently returns empty array so this is minimal change.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-18T16:50:12.515613-06:00","updated_at":"2025-12-18T17:08:14.69561-06:00","closed_at":"2025-12-18T17:08:14.69561-06:00","close_reason":"Changed getTools() return type from Anthropic.Tool[] to Record\u003cstring, Tool\u003e","dependencies":[{"issue_id":"mail-to-ai-q91.3","depends_on_id":"mail-to-ai-q91","type":"parent-child","created_at":"2025-12-18T16:50:12.517507-06:00","created_by":"daemon"}]}
{"id":"mail-to-ai-q91.4","title":"Verify typecheck passes after migration","description":"Run pnpm run typecheck to ensure no TypeScript errors after SDK migration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-18T16:50:12.601617-06:00","updated_at":"2025-12-18T17:08:14.77595-06:00","closed_at":"2025-12-18T17:08:14.77595-06:00","close_reason":"pnpm run typecheck passes successfully","dependencies":[{"issue_id":"mail-to-ai-q91.4","depends_on_id":"mail-to-ai-q91","type":"parent-child","created_at":"2025-12-18T16:50:12.603474-06:00","created_by":"daemon"}]}
